/*! pinny 1.0.0 2014-09-08 */
(function(t){if("function"==typeof define&&define.amd)define(["$","bouncefix","shade"],t);else{var n=window.Zepto||window.jQuery;t(n,n.Velocity)}})(function(t,n){function e(t,n){this._init(t,n)}var o="pinny",i=function(){},s="pinny--is-open",p='<header class="pinny__header">{0}</header>';return e.VERSION="1.0.0",e.DEFAULTS={effect:{open:i,close:i},header:"Pinny",footer:"",zIndex:2,cssClass:"",coverage:"100%",easing:"swing",duration:200,shade:{},open:i,opened:i,close:i,closed:i},e.prototype.animation={begin:function(){t("html").css("overflow","hidden")},beginClose:function(){t(document).on("touchmove",e.prototype._blockScroll),t("html").css("overflow","")},complete:function(){t(document).off("touchmove",e.prototype._blockScroll)}},e.prototype._init=function(o,i){var s=this;this.options=t.extend(!0,{},e.DEFAULTS,i),this.$body=t(document.body),this.$pinny=t("<section />").appendTo(this.$body).addClass("pinny").addClass(this.options.cssClass).css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}).on("click",".pinny__close",function(t){t.preventDefault(),s.close()}),this.$wrapper=t("<div />").addClass("pinny__wrapper").appendTo(this.$pinny),this.$header=t(this._buildHeader()).prependTo(this.$wrapper),this.$content=t("<div />").addClass("pinny__content").appendTo(this.$wrapper),t(o).appendTo(this.$content).removeClass("pinny__hidden"),this.options.footer&&(this.$footer=t(this.options.footer).addClass("pinny__footer").appendTo(this.$wrapper)),this.options.shade&&(this.$shade=this.$pinny.shade(t.extend(!0,{},{click:function(){s.close()}},this.options.shade))),n.add("pinny__content"),this.effect=this.options.effect,this._bindEvents()},e.prototype.toggle=function(){this[this.$pinny.hasClass(s)?"close":"open"]()},e.prototype.open=function(){this._trigger("open"),this.options.shade&&this.$shade.shade("open"),this.effect.open.call(this),this.$pinny.addClass(s),this._trigger("opened")},e.prototype.close=function(){this._trigger("close"),this.options.shade&&this.$shade.shade("close"),this.$pinny.removeClass(s),this.effect.close.call(this),this._trigger("closed")},e.prototype._bindEvents=function(){this.$pinny.on("touchmove",function(n){t(n.target).parents().hasClass("pinny__content")||n.preventDefault()})},e.prototype._buildHeader=function(){var n=this.options.header;return n?(n=this._isHtml(this.options.header)?this.options.header:'<h1 class="pinny__title">{0}</h1><button class="pinny__close">Close</button>'.replace("{0}",this.options.header),p.replace("{0}",n)):t([])},e.prototype._isHtml=function(t){return/<[a-z][\s\S]*>/i.test(t)},e.prototype._blockScroll=function(t){t.preventDefault()},e.prototype._trigger=function(n,e){n in this.options&&this.options[n].call(this,t.Event(o+":"+n,{bubbles:!1}),e)},e.prototype._coverage=function(t){var n,e=this.options.coverage.match(/(\d*)%$/);return e&&(n=100-parseInt(e[1]),t&&(n/=t)),e?n+"%":this.options.coverage},t.fn.pinny=function(n){var i=Array.prototype.slice.call(arguments);return this.each(function(){var s=t(this),p=s.data(o),a="string"==typeof n;if(!p){if(a)throw'cannot call methods on pinny prior to initialization; attempted to call method "'+n+'"';s.data(o,p=new e(this,n))}if(a){if("_"===n.charAt(0)||"function"!=typeof p[n])throw'no such method "'+n+'" for pinny';p[n].apply(p,i.length>1?i.slice(1):null)}})},t.fn.pinny.Constructor=e,t("[data-pinny]").pinny(),t});