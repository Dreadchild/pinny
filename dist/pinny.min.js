/*! pinny 1.0.0 2014-08-23 */
(function(t){"function"==typeof define&&define.amd?define(["bouncefix","selectorEngine","velocity","shade"],t):t(window.Zepto||window.jQuery)})(function(t,n){function o(t,n){this._init(t,n)}var i="pinny",e=function(){},s="pinny--is-open";return o.VERSION="1.0.0",o.DEFAULTS={position:{open:e,close:e},header:"Pinny",footer:"Footer",open:e,opened:e,close:e,closed:e,zIndex:2,coverage:"90%",easing:"swing",duration:150},o.prototype._init=function(i,e){var s=this,p=n(document.body);this.options=n.extend(!0,{},o.DEFAULTS,e),this.$pinny=n("<div />").appendTo(p).addClass("pinny").css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}),this.options.header&&(this.$header=n("<div />").addClass("pinny__header").html(this.options.header).prependTo(this.$pinny),n("<button />").html("Close").addClass("pinny__close").appendTo(this.$header).on("click",function(t){t.preventDefault(),s.close()})),this.$content=n("<div />").addClass("pinny__content").appendTo(this.$pinny),n(i).appendTo(this.$content).removeClass("pinny__hidden"),this.options.footer&&(this.$footer=n("<div />").addClass("pinny__footer").html(this.options.footer).appendTo(this.$pinny)),t.add("pinny__content"),this.$shade=p.shade({click:function(){s.close()}}),this.$pinny.on("touchmove",function(t){n(t.target).parents().hasClass("pinny__content")||t.preventDefault()}),this.position=this.options.position,this._bindEvents()},o.prototype._trigger=function(t,o){t in this.options&&this.options[t].call(this,n.Event(i+":"+t,{bubbles:!1}),o)},o.prototype._bindEvents=function(){},o.prototype.toggle=function(){this[this.$pinny.hasClass(s)?"close":"open"]()},o.prototype.open=function(){this._trigger("open"),this.$shade.shade("open"),this._open(),this._trigger("opened")},o.prototype.close=function(){this._trigger("close"),this.$shade.shade("close"),this.$pinny.removeClass(s),this._trigger("closed"),this._close()},o.prototype._open=function(){this.position.open.call(this),this.$pinny.addClass(s)},o.prototype._close=function(){this.position.close.call(this)},o.prototype._blockScroll=function(t){t.preventDefault()},o.prototype._setContentHeight=function(){var t=parseFloat(n.Velocity.CSS.getPropertyValue(this.$pinny[0],"height"));this.$header&&(t-=this.$header[0].scrollHeight),this.$footer&&(t-=parseFloat(n.Velocity.CSS.getPropertyValue(this.$footer[0],"height"))),this.$content.height(t)},n.fn.pinny=function(t){var e=Array.prototype.slice.call(arguments);return this.each(function(){var s=n(this),p=s.data(i),h="string"==typeof t;if(!p){if(h)throw'cannot call methods on pinny prior to initialization; attempted to call method "'+t+'"';s.data(i,p=new o(this,t))}if(h){if("_"===t.charAt(0)||"function"!=typeof p[t])throw'no such method "'+t+'" for pinny';p[t].apply(p,e.length>1?e.slice(1):null)}})},n.fn.pinny.Constructor=o,n("[data-pinny]").pinny(),n});