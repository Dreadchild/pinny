/*! pinny 1.0.0 2014-09-08 */
(function(n){if("function"==typeof define&&define.amd)define(["$","bouncefix","plugin","shade"],n);else{var o=window.Zepto||window.jQuery;n(o,o.Velocity)}})(function(n,o){function e(n,o){e._super.call(this,n,o,e.DEFAULTS)}var i="pinny--is-open",t='<header class="pinny__header">{0}</header>';return e.VERSION="1.0.0",e.DEFAULTS={position:{open:n.noop,close:n.noop},header:"Pinny",footer:"",zIndex:2,cssClass:"",coverage:"100%",easing:"swing",duration:200,shade:{},open:n.noop,opened:n.noop,close:n.noop,closed:n.noop},n.plugin("pinny",e,{animation:{begin:function(){n("html").css("overflow","hidden")},beginClose:function(){n(document).on("touchmove",e.prototype._blockScroll),n("html").css("overflow","")},complete:function(){n(document).off("touchmove",e.prototype._blockScroll)}},_init:function(e){var i=this;this.$body=n(document.body),this.$pinny=n("<section />").appendTo(this.$body).addClass("pinny").addClass(this.options.cssClass).css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}).on("click",".pinny__close",function(n){n.preventDefault(),i.close()}),this.$wrapper=n("<div />").addClass("pinny__wrapper").appendTo(this.$pinny),this.$header=n(this._buildHeader()).prependTo(this.$wrapper),this.$content=n("<div />").addClass("pinny__content").appendTo(this.$wrapper),n(e).appendTo(this.$content).removeClass("pinny__hidden"),this.options.footer&&(this.$footer=n(this.options.footer).addClass("pinny__footer").appendTo(this.$wrapper)),this.options.shade&&(this.$shade=this.$pinny.shade(n.extend(!0,{},{click:function(){i.close()}},this.options.shade))),o.add("pinny__content"),this.position=this.options.position,this._bindEvents()},toggle:function(){this[this.$pinny.hasClass(i)?"close":"open"]()},open:function(){this._trigger("open"),this.options.shade&&this.$shade.shade("open"),this.position.open.call(this),this.$pinny.addClass(i),this._trigger("opened")},close:function(){this._trigger("close"),this.options.shade&&this.$shade.shade("close"),this.$pinny.removeClass(i),this.position.close.call(this),this._trigger("closed")},_bindEvents:function(){this.$pinny.on("touchmove",function(o){n(o.target).parents().hasClass("pinny__content")||o.preventDefault()})},_buildHeader:function(){var o=this.options.header;return o?(o=this._isHtml(this.options.header)?this.options.header:'<h1 class="pinny__title">{0}</h1><button class="pinny__close">Close</button>'.replace("{0}",this.options.header),t.replace("{0}",o)):n([])},_isHtml:function(n){return/<[a-z][\s\S]*>/i.test(n)},_blockScroll:function(n){n.preventDefault()},_coverage:function(n){var o,e=this.options.coverage.match(/(\d*)%$/);return e&&(o=100-parseInt(e[1]),n&&(o/=n)),e?o+"%":this.options.coverage}}),n("[data-pinny]").pinny(),n});