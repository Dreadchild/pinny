/*! pinny 1.1.0 (https://github.com/mobify/pinny.git) */
(function(t){if("function"==typeof define&&define.amd)define(["$","plugin","bouncefix","lockup","shade"],t);else{var i=window.Zepto||window.jQuery;t(i,window.Plugin,window.bouncefix)}})(function(t,i,n){function e(t,i){e.__super__.call(this,t,i,e.DEFAULTS)}var s="Pinny requires a declared effect to operate. For more information read: https://github.com/mobify/pinny#initializing-the-plugin",o="a[href], area[href], input, select, textarea, button, iframe, object, embed, [tabindex], [contenteditable]";Function.prototype.bind||(Function.prototype.bind=function(t){var i=this;return function(){return i.apply(t)}});var a={PINNY:"pinny",WRAPPER:"pinny__wrapper",TITLE:"pinny__title",CLOSE:"pinny__close",CONTENT:"pinny__content",OPENED:"pinny--is-open",SCROLLABLE:"pinny--is-scrollable"},r={COMPONENT:'<{0} class="'+a.PINNY+'__{0}">{1}</{0}>',HEADER:'<h1 class="'+a.TITLE+'">{0}</h1><button class="'+a.CLOSE+'">Close</button>',FOOTER:"{0}"};return e.VERSION="1.1.0",e.DEFAULTS={effect:null,container:null,appendTo:null,structure:{header:"",footer:!1},zIndex:2,cssClass:"",coverage:"100%",easing:"swing",duration:200,shade:{},open:t.noop,opened:t.noop,close:t.noop,closed:t.noop},i.create("pinny",e,{animation:{openComplete:function(){this._trigger("opened"),this._focus()},closeComplete:function(){this._trigger("closed"),this._resetFocus()}},_init:function(i){if(this.id="pinny-"+t.uniqueId(),this.$element=t(i),this.$doc=t(document),this.$body=t("body"),this._build(),!this.options.effect)throw s;this.effect=this.options.effect.call(this),this.$element.removeAttr("hidden"),this._bindEvents()},toggle:function(){this[this.$pinny.hasClass(a.OPENED)?"close":"open"]()},open:function(){this._trigger("open"),n.add(a.SCROLLABLE),this.options.shade&&this.$shade.shade("open"),!this._activePinnies()&&this.$pinny.lockup("lock"),this.$pinny.addClass(a.OPENED),this.effect.open.call(this)},close:function(){this._trigger("close"),n.remove(a.SCROLLABLE),this.options.shade&&this.$shade.shade("close"),this.$pinny.removeClass(a.OPENED),!this._activePinnies()&&this.$pinny.lockup("unlock"),this.effect.close.call(this)},_bindEvents:function(){this.$pinny.on("touchmove",function(i){t(i.target).parents().hasClass(a.CONTENT)||i.preventDefault()})},_build:function(){var i=this;if(this.$pinny=t("<section />").addClass(a.PINNY).addClass(this.options.cssClass).css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}).on("click","."+a.CLOSE,function(t){t.preventDefault(),i.close()}).lockup({container:this.options.container}),this.$container=this.$pinny.data("lockup").$container,this.$pinny.appendTo(this.options.appendTo?t(this.options.appendTo):this.$container),this.options.structure){var n=t("<div />").addClass(a.WRAPPER).appendTo(this.$pinny);this._buildComponent("header").appendTo(n),t("<div />").addClass(a.CONTENT).addClass(a.SCROLLABLE).append(this.$element).appendTo(n),this._buildComponent("footer").appendTo(n)}else this.$element.appendTo(this.$pinny);this._addAccessibility(),this.options.shade&&(this.$shade=this.$pinny.shade(t.extend(!0,{},{click:function(){i.close()}},t.extend(this.options.shade,{duration:this.options.duration}))))},_buildComponent:function(i){var n=this.options.structure[i],e=t([]);if(n!==!1){var s=this._isHtml(n)?n:r[i.toUpperCase()].replace("{0}",n);e=t(r.COMPONENT.replace(/\{0\}/g,i).replace(/\{1\}/g,s))}return e},_isHtml:function(t){return/<[a-z][\s\S]*>/i.test(t)},_activePinnies:function(){return!!t(".pinny--is-open").length},_coverage:function(t){var i,n=this.options.coverage.match(/(\d*)%$/);return n&&(i=100-parseInt(n[1]),t&&(i/=t)),n?i+"%":this.options.coverage},_addAccessibility:function(){var t=this.id+"__header",i=this.$pinny.find("h1, ."+a.TITLE).first(),n=this.$pinny.find("."+a.WRAPPER);this.$container.attr("aria-hidden","false"),this.$pinny.attr("role","dialog").attr("aria-labelledby",t).attr("aria-hidden","true").attr("tabindex","-1"),n.attr("role","document"),i.attr("id",t)},_focus:function(){this.originalActiveElement=document.activeElement,this._disableInputs(),this.$pinny.attr("aria-hidden","false"),this.$pinny.children().first().focus(),this.$container.attr("aria-hidden","true")},_resetFocus:function(){this._enableInputs(),this.$container.attr("aria-hidden","false"),this.$pinny.attr("aria-hidden","true"),this.originalActiveElement.focus()},_disableInputs:function(){if(!this.$pinny.lockup("isLocked")){var i=t(o).not(function(){return t(this).closest(".pinny").length});i.each(function(i,n){var e=t(n),s=e.attr("tabindex")||0;e.attr("data-orig-tabindex",s).attr("tabindex","-1")})}},_enableInputs:function(){this._activePinnies()||t("[data-orig-tabindex]").each(function(i,n){var e=t(n),s=e.attr("data-orig-tabindex");s?e.attr("tabindex",s):e.removeAttr("tabindex"),e.removeAttr("data-orig-tabindex")})}}),t("[data-pinny]").each(function(){var i=t(this),n=t(this).data("pinny");if(!n.length)throw s;i.pinny({effect:n})}),t});