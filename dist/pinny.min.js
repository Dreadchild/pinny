/*! pinny 1.0.0 2014-09-02 */
(function(t){if("function"==typeof define&&define.amd)define(["$","bouncefix","shade"],t);else{var n=window.Zepto||window.jQuery;t(n,n.Velocity)}})(function(t,n){function o(t,n){this._init(t,n)}var i="pinny",e=function(){},s="pinny--is-open",p='<header class="pinny__header">{0}</header>';return o.VERSION="1.0.0",o.DEFAULTS={position:{open:e,close:e},header:"Pinny",footer:"",zIndex:2,cssClass:"",coverage:"100%",easing:"swing",duration:200,shade:{},open:e,opened:e,close:e,closed:e},o.prototype.animation={begin:function(){t("html").css("overflow","hidden")},beginClose:function(){t(document).on("touchmove",o.prototype._blockScroll),t("html").css("overflow","")},complete:function(){t(document).off("touchmove",o.prototype._blockScroll)}},o.prototype._init=function(i,e){var s=this;this.options=t.extend(!0,{},o.DEFAULTS,e),this.$body=t(document.body),this.$pinny=t("<section />").appendTo(this.$body).addClass("pinny").addClass(this.options.cssClass).css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}).on("click",".pinny__close",function(t){t.preventDefault(),s.close()}),this.$header=t(this._buildHeader()).prependTo(this.$pinny),this.$content=t("<div />").addClass("pinny__content").appendTo(this.$pinny),t(i).appendTo(this.$content).removeClass("pinny__hidden"),this.options.footer&&(this.$footer=t(this.options.footer).addClass("pinny__footer").appendTo(this.$pinny)),this.$shade=this.$pinny.shade(t.extend(!0,{},{click:function(){s.close()}},this.options.shade)),n.add("pinny__content"),this.position=this.options.position,this._bindEvents()},o.prototype.toggle=function(){this[this.$pinny.hasClass(s)?"close":"open"]()},o.prototype.open=function(){this._trigger("open"),this.options.shade&&this.$shade.shade("open"),this.position.open.call(this),this.$pinny.addClass(s),this._trigger("opened")},o.prototype.close=function(){this._trigger("close"),this.options.shade&&this.$shade.shade("close"),this.$pinny.removeClass(s),this.position.close.call(this),this._trigger("closed")},o.prototype._bindEvents=function(){this.$pinny.on("touchmove",function(n){t(n.target).parents().hasClass("pinny__content")||n.preventDefault()})},o.prototype._buildHeader=function(){var t=this._isHtml(this.options.header)?this.options.header:'<h1 class="pinny__title">{0}</h1><button class="pinny__close">Close</button>'.replace("{0}",this.options.header);return p.replace("{0}",t)},o.prototype._isHtml=function(t){return/<[a-z][\s\S]*>/i.test(t)},o.prototype._blockScroll=function(t){t.preventDefault()},o.prototype._trigger=function(n,o){n in this.options&&this.options[n].call(this,t.Event(i+":"+n,{bubbles:!1}),o)},o.prototype._coverage=function(t){var n,o=this.options.coverage.match(/(\d*)%$/);return o&&(n=100-parseInt(o[1]),t&&(n/=t)),o?n+"%":this.options.coverage},t.fn.pinny=function(n){var e=Array.prototype.slice.call(arguments);return this.each(function(){var s=t(this),p=s.data(i),h="string"==typeof n;if(!p){if(h)throw'cannot call methods on pinny prior to initialization; attempted to call method "'+n+'"';s.data(i,p=new o(this,n))}if(h){if("_"===n.charAt(0)||"function"!=typeof p[n])throw'no such method "'+n+'" for pinny';p[n].apply(p,e.length>1?e.slice(1):null)}})},t.fn.pinny.Constructor=o,t("[data-pinny]").pinny(),t});