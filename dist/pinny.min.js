/*! pinny 1.0.0 2014-09-11 */
(function(n){if("function"==typeof define&&define.amd)define(["$","bouncefix","plugin","shade"],n);else{var e=window.Zepto||window.jQuery;n(e,e.Velocity)}})(function(n,e){function o(n,e){o._super.call(this,n,e,o.DEFAULTS)}var t,i=n(document),s=n("html"),p=/chrome/i.test(navigator.userAgent),c={OPENED:"pinny--is-open"},h={COMPONENT:'<{0} class="pinny__{0}">{1}</{0}>',HEADER:'<h1 class="pinny__title">{0}</h1><button class="pinny__close">Close</button>',FOOTER:"{0}"};return o.VERSION="1.0.0",o.DEFAULTS={effect:{open:n.noop,close:n.noop},header:"Pinny",footer:!1,zIndex:2,cssClass:"",coverage:"100%",easing:"swing",duration:200,shade:{},open:n.noop,opened:n.noop,close:n.noop,closed:n.noop},n.plugin("pinny",o,{animation:{beginClose:function(){i.on("touchmove",this._blockScroll)},openComplete:function(){p&&(t=document.body.scrollTop,s.css("position","fixed"),s.css("top",-1*t)),this._trigger("opened"),i.off("touchmove",this._blockScroll)},closeComplete:function(){p&&(s.css("position",""),s.css("top",""),window.scrollTo(0,t)),this._trigger("closed"),i.off("touchmove",this._blockScroll)}},_init:function(o){var t=this;this.$element=n(o),this.$body=n(document.body),this.$pinny=n("<section />").appendTo(this.$body).addClass("pinny").addClass(this.options.cssClass).css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}).on("click",".pinny__close",function(n){n.preventDefault(),t.close()}),this.options.header!==!1?this._build():this.$element.appendTo(this.$pinny),this.options.shade&&(this.$shade=this.$pinny.shade(n.extend(!0,{},{click:function(){t.close()}},this.options.shade))),e.add("pinny__content"),this.effect=this.options.effect,this.$pinny.find(".pinny__hidden").removeClass("pinny__hidden"),this._bindEvents()},toggle:function(){this[this.$pinny.hasClass(c.OPENED)?"close":"open"]()},open:function(){this._trigger("open"),this.options.shade&&this.$shade.shade("open"),this.effect.open.call(this),this.$pinny.addClass(c.OPENED)},close:function(){this._trigger("close"),this.options.shade&&this.$shade.shade("close"),this.$pinny.removeClass(c.OPENED),this.effect.close.call(this)},_bindEvents:function(){this.$pinny.on("touchmove",function(e){n(e.target).parents().hasClass("pinny__content")||e.preventDefault()})},_build:function(){var e=n("<div />").addClass("pinny__wrapper").appendTo(this.$pinny);n(this._buildComponent("header")).prependTo(e),n("<div />").addClass("pinny__content").append(this.$element).appendTo(e),this.options.footer&&n(this._buildComponent("footer")).appendTo(e)},_buildComponent:function(e){var o=this.options[e];return o?(o=this._isHtml(o)?o:h[e.toUpperCase()].replace("{0}",o),h.COMPONENT.replace(/\{0\}/g,e).replace(/\{1\}/g,o)):n([])},_isHtml:function(n){return/<[a-z][\s\S]*>/i.test(n)},_blockScroll:function(n){n.preventDefault()},_coverage:function(n){var e,o=this.options.coverage.match(/(\d*)%$/);return o&&(e=100-parseInt(o[1]),n&&(e/=n)),o?e+"%":this.options.coverage}}),n("[data-pinny]").pinny(),n});