/*! pinny 1.0.0 2014-08-18 */
(function(t){"function"==typeof define&&define.amd?define(["bouncefix","selectorEngine","velocity","zappy","shade"],t):t(window.Zepto||window.jQuery)})(function(t,n){function i(t,n){this._init(t,n)}var o="pinny",e=function(){},s="pinny--is-open",p=function(t){t.preventDefault()};return i.VERSION="1.0.0",i.DEFAULTS={position:function(){throw"You must specify a position function that instructs Pinny how to open."},title:"Pinny",open:e,opened:e,close:e,closed:e,zIndex:2,coverage:"90%",easing:"swing",duration:150},i.prototype._init=function(o,e){var s=this,p=n(document.body);this.options=n.extend(!0,{},i.DEFAULTS,e),this.$pinny=n("<div />").appendTo(p).addClass("pinny").css({position:"fixed",zIndex:this.options.zIndex,width:this.options.coverage,height:this.options.coverage}),this.options.title&&(this.$title=n("<div />").addClass("pinny__title").html(this.options.title).prependTo(this.$pinny),n("<button />").html("&times").addClass("pinny__close").appendTo(this.$title).on("click",function(t){t.preventDefault(),s.close()})),this.$content=n("<div />").addClass("pinny__content").appendTo(this.$pinny),n(o).appendTo(this.$content).show(),t.add("pinny__content"),this.$shade=p.shade({click:function(){s.close()}}),this.$pinny.on("touchmove",function(t){n(t.target).parents().hasClass("pinny__content")||t.preventDefault()}),this.position=this.options.position,this._bindEvents()},i.prototype._trigger=function(t,i){t in this.options&&this.options[t].call(this,n.Event(o+":"+t,{bubbles:!1}),i)},i.prototype._bindEvents=function(){},i.prototype.toggle=function(){this[this.$pinny.hasClass(s)?"close":"open"]()},i.prototype.open=function(){this._trigger("open"),this.$shade.shade("open"),this._open(),this._trigger("opened")},i.prototype.close=function(){this._trigger("close"),this.$shade.shade("close"),this.$pinny.removeClass(s),this._trigger("closed"),this.$pinny.velocity("reverse",{begin:function(){n(document).on("touchmove",p),n("html").css("overflow","")},easing:this.options.easing,duration:this.options.duration,display:"none",complete:function(){n(document).off("touchmove",p)}})},i.prototype._open=function(){var t=40;$item=this.$pinny,$content=this.$content,$title=this.$title,this.position(this.$pinny),this.$pinny.velocity({translateY:["100%","100%"]},0).velocity({translateY:0},{begin:function(){n("html").css("overflow","hidden")},easing:this.options.easing,duration:this.options.duration,display:"block",complete:function(){$content.height($title?$item.height()-$title.height()-t:$item.height()),n(document).off("touchmove",p)}})},i.prototype._getHeight=function(t){return parseFloat(n.Velocity.CSS.getPropertyValue(t[0],"height"))},n.fn.pinny=function(t){var e=Array.prototype.slice.call(arguments);return this.each(function(){var s=n(this),p=s.data(o),h="string"==typeof t;if(!p){if(h)throw'cannot call methods on pinny prior to initialization; attempted to call method "'+t+'"';s.data(o,p=new i(this,t))}if(h){if("_"===t.charAt(0)||"function"!=typeof p[t])throw'no such method "'+t+'" for pinny';p[t].apply(p,e.length>1?e.slice(1):null)}})},n.fn.pinny.Constructor=i,n("[data-pinny]").pinny(),n});